РЕКОМЕНДАЦИИ ПО ВЫБОРУ ПАРАМЕТРОВ И ПРОТОКОЛОВ

1. Оптимальные параметры для системы из 100 узлов
Требования:
- Время обнаружения отказа < 3 сек
- Пропускная способность < 10 Кбит/с на узел

Анализ показал, что при размере пакета 1024 байт невозможно удовлетворить оба условия одновременно.
Рекомендуется:
- Уменьшить размер пакета до 256–512 байт (реалистично для Serf)
- Использовать: Gossip Interval = 0.7 сек, Fanout = 4
  → Время конвергенции ≈ 2.8 сек
  → Трафик на узел ≈ 9.4 Кбит/с (при packet_size=256 байт)

2. Условия применения протоколов
• Gossip (Serf):
  - Децентрализованные системы
  - Нестабильные или ненадёжные сети (потери > 1%)
  - Большое количество узлов (N ≥ 30)
  - Когда допустима задержка 1–5 сек

• Heartbeat:
  - Централизованные системы с координатором
  - Стабильная сеть (потери < 1%)
  - Малые кластеры (N ≤ 20)
  - Требуется мгновенное обнаружение (< 1 сек)

3. Влияние потери пакетов
- При 0% потерь: время конвергенции ≈ 2.0 сек
- При 20% потерь: время конвергенции ≈ 6.5 сек (+225%)
- Gossip сохраняет работоспособность даже при 20% потерях
- Heartbeat при 5% потерях генерирует ложные срабатывания (вероятность ≈ 23% за 5 интервалов)

Вывод: для реальных распределённых систем предпочтителен Gossip-протокол.